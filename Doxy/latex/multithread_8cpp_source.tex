\hypertarget{multithread_8cpp_source}{}\doxysection{multithread.\+cpp}
\label{multithread_8cpp_source}\index{Image-\/Computing-\/POS-\/Project/multithread.cpp@{Image-\/Computing-\/POS-\/Project/multithread.cpp}}
\mbox{\hyperlink{multithread_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include <thread>}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <mutex>}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{img__proces_8h}{img\_proces.h}}"{}}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00006}00006 \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00011}\mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{00011}} \textcolor{keyword}{auto} \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}} = std::thread::hardware\_concurrency();}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00016}\mbox{\hyperlink{multithread_8cpp_a4aac70c29fbd4e257a43b3ae2b3a4250}{00016}} mutex \mbox{\hyperlink{multithread_8cpp_a4aac70c29fbd4e257a43b3ae2b3a4250}{mymutex}};}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00021}\mbox{\hyperlink{multithread_8cpp_ad71f043e363288f24e89652770ec1eb2}{00021}} thread* \mbox{\hyperlink{multithread_8cpp_ad71f043e363288f24e89652770ec1eb2}{worker}} = \textcolor{keyword}{new} thread[\mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}}];}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00023}\mbox{\hyperlink{multithread_8cpp_a5cfb4319272a7987ecf533116fb3ba7b}{00023}} \textcolor{keywordtype}{void} \mbox{\hyperlink{multithread_8cpp_a5cfb4319272a7987ecf533116fb3ba7b}{Work}}(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00024}00024 \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00030}00030     \mbox{\hyperlink{img__proces_8cpp_ad9f454c15364682bb607240fdac83db7}{img\_read}}(n);}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00031}00031     \mbox{\hyperlink{img__proces_8cpp_a460b50e10053ab4e957b16eb60df2e3e}{edge\_detecting}}(n);}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00032}00032     \mbox{\hyperlink{multithread_8cpp_a4aac70c29fbd4e257a43b3ae2b3a4250}{mymutex}}.lock();}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00033}00033     \mbox{\hyperlink{img__proces_8cpp_a63417198c529b960ec8a21eaa9d256c3}{img\_write}}(n);}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00034}00034     \mbox{\hyperlink{multithread_8cpp_a4aac70c29fbd4e257a43b3ae2b3a4250}{mymutex}}.unlock();}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00035}00035 \}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00037}\mbox{\hyperlink{multithread_8cpp_a9a8cc02a6821d411e7d417edabcf1e95}{00037}} \textcolor{keywordtype}{void} \mbox{\hyperlink{multithread_8cpp_a9a8cc02a6821d411e7d417edabcf1e95}{multithread}}() \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00044}00044     cout << \textcolor{stringliteral}{"{}Number of threads: "{}} << \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}} << endl;}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00046}00046     \textcolor{keywordtype}{int} images = size(\mbox{\hyperlink{img__proces_8cpp_a2147c4bd2997d8faf67e2152bda096e0}{Image}}) -\/ 1;}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00048}00048     \textcolor{keywordtype}{int} iterations = size(\mbox{\hyperlink{img__proces_8cpp_a2147c4bd2997d8faf67e2152bda096e0}{Image}}) / \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}};}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00049}00049     \textcolor{keywordflow}{if} (size(\mbox{\hyperlink{img__proces_8cpp_a2147c4bd2997d8faf67e2152bda096e0}{Image}}) \% \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}})}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00050}00050     \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00051}00051         iterations++;}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00052}00052     \}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00054}00054     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < iterations; i++)}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00055}00055     \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00056}00056         \textcolor{keywordflow}{if} (i == iterations -\/ 1 \&\& size(\mbox{\hyperlink{img__proces_8cpp_a2147c4bd2997d8faf67e2152bda096e0}{Image}}) \% \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}} != 0)}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00057}00057             \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}} = size(\mbox{\hyperlink{img__proces_8cpp_a2147c4bd2997d8faf67e2152bda096e0}{Image}}) \% \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}};}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00058}00058         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}}; j++)}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00059}00059         \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00060}00060             \mbox{\hyperlink{multithread_8cpp_ad71f043e363288f24e89652770ec1eb2}{worker}}[j] = thread(\mbox{\hyperlink{multithread_8cpp_a5cfb4319272a7987ecf533116fb3ba7b}{Work}}, images);}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00061}00061             images-\/-\/;}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00062}00062         \}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00064}00064         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < \mbox{\hyperlink{multithread_8cpp_af76c77153a5f4c39211f8a0965413fe0}{processors}}; j++)}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00065}00065         \{}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00066}00066             \mbox{\hyperlink{multithread_8cpp_ad71f043e363288f24e89652770ec1eb2}{worker}}[j].join();}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00067}00067         \}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00068}00068     \}}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00072}00072     \textcolor{keyword}{delete}[] \mbox{\hyperlink{multithread_8cpp_ad71f043e363288f24e89652770ec1eb2}{worker}};}
\DoxyCodeLine{\Hypertarget{multithread_8cpp_source_l00073}00073 \}}

\end{DoxyCode}
